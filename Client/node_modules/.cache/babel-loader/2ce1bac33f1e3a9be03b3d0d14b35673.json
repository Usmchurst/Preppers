{"ast":null,"code":"var _jsxFileName = \"/Users/noahgaston/Desktop/Preppers/Client/src/components/post.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport auth from '../utils/auth';\nimport { getMe } from '../utils/user';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PostForm() {\n  _s();\n\n  // const [postName, setPostName] = useState('')\n  // const [postBody, setPostBody] = useState('')\n  // const [imgUrl, setImgUrl ] = useState({});\n  const [userData, setUserData] = useState({});\n  const [file, setfile] = useState('');\n  const [image, setImage] = useState('');\n  const userDataLength = Object.keys(userData).length;\n  useEffect(() => {\n    const getUserData = async () => {\n      try {\n        const token = auth.loggedIn() ? auth.getToken() : null;\n\n        if (!token) {\n          return false;\n        }\n\n        const response = await getMe(token);\n\n        if (!response.ok) {\n          throw new Error('something went wrong!');\n        }\n\n        const user = await response.json();\n        setUserData(user);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    getUserData();\n  }, [userDataLength]);\n\n  function previewFiles(file) {\n    const reader = new FileReader(file);\n    reader.readAsDataURL(file);\n\n    reader.onloadend = () => {\n      setImage(reader.result);\n    };\n  }\n\n  ;\n\n  async function handleSubmit(file) {\n    const result = await axios.post(\"http://localhost:3001/post\", {\n      image: image\n    });\n\n    try {\n      console.log(result.data);\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  ;\n\n  function handleChange(e) {\n    const file = e.target.files[0];\n    setfile(file);\n    previewFiles(file);\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => handleSubmit(e),\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fileInput\",\n        children: \"Upload Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"fileInput\",\n        onChange: e => handleChange(e),\n        required: true,\n        accept: \"image/png, image/jpeg, image/jpg, image/jfif\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: image,\n      alt: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PostForm, \"S4l/Fs9ndijnBQPSPdqmmpPVoY4=\");\n\n_c = PostForm;\n;\nexport default PostForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostForm\");","map":{"version":3,"names":["React","useEffect","useState","auth","getMe","axios","PostForm","userData","setUserData","file","setfile","image","setImage","userDataLength","Object","keys","length","getUserData","token","loggedIn","getToken","response","ok","Error","user","json","err","console","error","previewFiles","reader","FileReader","readAsDataURL","onloadend","result","handleSubmit","post","log","data","handleChange","e","target","files"],"sources":["/Users/noahgaston/Desktop/Preppers/Client/src/components/post.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport auth from '../utils/auth';\nimport { getMe } from '../utils/user';\nimport axios from 'axios';\n function PostForm() {\n    // const [postName, setPostName] = useState('')\n    // const [postBody, setPostBody] = useState('')\n    // const [imgUrl, setImgUrl ] = useState({});\n    const [userData, setUserData] = useState({});\n    const [file, setfile] = useState('');\n    const [image, setImage] = useState('');\n\n    const userDataLength = Object.keys(userData).length;\n\n    useEffect(() => {\n        const getUserData = async () => {\n       \n          try {\n          \n            const token = auth.loggedIn() ? auth.getToken() : null;\n            \n            if (!token) {\n              return false;\n            }\n    \n            const response = await getMe(token);\n          \n\n            if (!response.ok) {\n              throw new Error('something went wrong!');\n            }\n            const user = await response.json();\n            setUserData(user);\n            \n          } catch (err) {\n            console.error(err);\n          }\n        };\n    \n        getUserData();\n      }, [userDataLength]);\n\n      function previewFiles(file){\n        const reader = new FileReader(file);\n        reader.readAsDataURL(file)\n\n        reader.onloadend = ()=>{\n          setImage(reader.result)\n        }\n\n      };\n\n      async function handleSubmit(file){\n        const result = await axios.post(\"http://localhost:3001/post\", {\n          image: image\n        })\n        try{\n          console.log(result.data)\n        } catch(err){\n          console.log(err)\n        }\n      };\n\n      function handleChange(e){\n        const file = e.target.files[0];\n        setfile(file)\n        previewFiles(file);\n      };\n   \n    return (\n    <div className=\"form\">\n      <form onSubmit={e=> handleSubmit(e)}>\n        <label htmlFor='fileInput'>Upload Image</label>\n        <input type=\"file\" id=\"fileInput\" onChange={e=> handleChange(e)} required\n        accept='image/png, image/jpeg, image/jpg, image/jfif' />\n        <button>submit</button>\n      </form>\n      <img src={image} alt='' />\n    </div>\n    )\n};\n\nexport default PostForm"],"mappings":"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"},"metadata":{},"sourceType":"module"}
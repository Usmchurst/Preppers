{"ast":null,"code":"var _jsxFileName = \"/Users/noahgaston/Desktop/Preppers/Client/src/components/post.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport auth from '../utils/auth';\nimport { getMe } from '../utils/user';\nimport axios from 'axios';\nimport Img from './image';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PostForm() {\n  _s();\n\n  const [postName, setPostName] = useState('');\n  const [postBody, setPostBody] = useState('');\n  const [userData, setUserData] = useState({});\n  const [file, setfile] = useState('');\n  const [image, setImage] = useState('');\n  const [uploadedImage, setUpload] = useState('');\n  const userDataLength = Object.keys(userData).length;\n  useEffect(() => {\n    const getUserData = async () => {\n      try {\n        const token = auth.loggedIn() ? auth.getToken() : null;\n\n        if (!token) {\n          return false;\n        }\n\n        const response = await getMe(token);\n\n        if (!response.ok) {\n          throw new Error('something went wrong!');\n        }\n\n        const user = await response.json();\n        setUserData(user);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    getUserData();\n  }, [userDataLength]);\n\n  function previewFiles(file) {\n    const reader = new FileReader(file);\n    reader.readAsDataURL(file);\n\n    reader.onloadend = () => {\n      setImage(reader.result);\n    };\n  }\n\n  ;\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const result = await axios.post(\"http://localhost:3001/post\", {\n      image: image\n    });\n\n    try {\n      const uploadedImg = result.data.public_id;\n      setUpload(uploadedImg);\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  ;\n\n  function handleChange(e) {\n    const file = e.target.files[0];\n    setfile(file);\n    previewFiles(file);\n  }\n\n  ;\n\n  async function createPost(e) {\n    e.preventDefault();\n\n    if (postName === \" \" || postBody === \" \") {\n      alert('Please add post information');\n    } else {\n      getAllPosts;\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"title\",\n      children: \"Post title\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      id: \"title\",\n      onChange: e => setPostName(e.target.value),\n      required: true,\n      value: postName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"title\",\n      children: \"Post body\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      id: \"title\",\n      onChange: e => setPostBody(e.target.value),\n      required: true,\n      value: postBody\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => handleSubmit(e),\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fileInput\",\n        children: \"Upload Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"fileInput\",\n        onChange: e => handleChange(e),\n        required: true,\n        accept: \"image/png, image/jpeg, image/jpg, image/jfif\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"upload Photo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Img, {\n      uploadedImage: uploadedImage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: createPost,\n      children: \"Create Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PostForm, \"tggZWDqgYFJ3n+nbqZhiGKTWeVU=\");\n\n_c = PostForm;\n;\nexport default PostForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostForm\");","map":{"version":3,"names":["React","useEffect","useState","auth","getMe","axios","Img","PostForm","postName","setPostName","postBody","setPostBody","userData","setUserData","file","setfile","image","setImage","uploadedImage","setUpload","userDataLength","Object","keys","length","getUserData","token","loggedIn","getToken","response","ok","Error","user","json","err","console","error","previewFiles","reader","FileReader","readAsDataURL","onloadend","result","handleSubmit","e","preventDefault","post","uploadedImg","data","public_id","log","handleChange","target","files","createPost","alert","getAllPosts","value"],"sources":["/Users/noahgaston/Desktop/Preppers/Client/src/components/post.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport auth from '../utils/auth';\nimport { getMe } from '../utils/user';\nimport axios from 'axios';\nimport Img from './image'\n\n function PostForm() {\n    const [postName, setPostName] = useState('')\n    const [postBody, setPostBody] = useState('')\n    const [userData, setUserData] = useState({});\n    const [file, setfile] = useState('');\n    const [image, setImage] = useState('');\n    const [uploadedImage, setUpload] = useState('');\n\n    const userDataLength = Object.keys(userData).length;\n\n    useEffect(() => {\n        const getUserData = async () => {\n       \n          try {\n          \n            const token = auth.loggedIn() ? auth.getToken() : null;\n            \n            if (!token) {\n              return false;\n            }\n    \n            const response = await getMe(token);\n          \n\n            if (!response.ok) {\n              throw new Error('something went wrong!');\n            }\n            const user = await response.json();\n            setUserData(user);\n            \n          } catch (err) {\n            console.error(err);\n          }\n        };\n    \n        getUserData();\n      }, [userDataLength]);\n\n      function previewFiles(file){\n        const reader = new FileReader(file);\n        reader.readAsDataURL(file)\n\n        reader.onloadend = ()=>{\n          setImage(reader.result)\n        }\n\n      };\n\n      async function handleSubmit(e){\n        e.preventDefault()\n        const result = await axios.post(\"http://localhost:3001/post\", {\n          image: image\n        })\n        try{\n          const uploadedImg = result.data.public_id\n          setUpload(uploadedImg)\n        } catch(err){\n          console.log(err)\n        }\n      };\n\n      function handleChange(e){\n        const file = e.target.files[0];\n        setfile(file)\n        previewFiles(file);\n      };\n      \n      async function createPost(e){\n        e.preventDefault();\n\n        if(postName === \" \" || postBody === \" \") {\n          alert('Please add post information')\n        } else {\n          getAllPosts\n      }\n    }\n\n    return (\n    <div className=\"form\">\n\n        <label htmlFor='title'>Post title</label>\n        <input type=\"text\" \n        id=\"title\" \n        onChange={(e) => setPostName(e.target.value)}\n        required\n        value={postName}\n        />\n        <br/>\n\n        <label htmlFor='title'>Post body</label>\n        <input \n        type=\"text\"\n         id=\"title\" \n         onChange={(e) => setPostBody(e.target.value)}\n         required\n         value={postBody}\n         />\n       \n\n      <form onSubmit={e=> handleSubmit(e)}>\n          <label htmlFor='fileInput'>Upload Image</label>\n          <input type=\"file\" id=\"fileInput\" onChange={e=> handleChange(e)} required\n          accept='image/png, image/jpeg, image/jpg, image/jfif' />\n          <button>upload Photo</button>\n        </form>\n      <Img uploadedImage={uploadedImage} />\n\n      <button onClick={createPost}>Create Post</button>\n\n    </div>\n    )\n};\n\nexport default PostForm"],"mappings":"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"},"metadata":{},"sourceType":"module"}
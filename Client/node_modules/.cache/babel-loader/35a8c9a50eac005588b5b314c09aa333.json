{"ast":null,"code":"var _jsxFileName = \"/Users/noahgaston/Desktop/Preppers/Client/src/components/post.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport auth from '../utils/auth';\nimport { getMe } from '../utils/user';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nim;\n\nfunction PostForm() {\n  _s();\n\n  // const [postName, setPostName] = useState('')\n  // const [postBody, setPostBody] = useState('')\n  // const [imgUrl, setImgUrl ] = useState({});\n  const [userData, setUserData] = useState({});\n  const [file, setfile] = useState('');\n  const [image, setImage] = useState('');\n  const [uploadedImage, setUpload] = useState('');\n  const userDataLength = Object.keys(userData).length;\n  useEffect(() => {\n    const getUserData = async () => {\n      try {\n        const token = auth.loggedIn() ? auth.getToken() : null;\n\n        if (!token) {\n          return false;\n        }\n\n        const response = await getMe(token);\n\n        if (!response.ok) {\n          throw new Error('something went wrong!');\n        }\n\n        const user = await response.json();\n        setUserData(user);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    getUserData();\n  }, [userDataLength]);\n\n  function previewFiles(file) {\n    const reader = new FileReader(file);\n    reader.readAsDataURL(file);\n\n    reader.onloadend = () => {\n      setImage(reader.result);\n    };\n  }\n\n  ;\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    const result = await axios.post(\"http://localhost:3001/post\", {\n      image: image\n    });\n\n    try {\n      const uploadedImg = result.data.public_id;\n      setUpload(uploadedImg);\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  ;\n\n  function handleChange(e) {\n    const file = e.target.files[0];\n    setfile(file);\n    previewFiles(file);\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => handleSubmit(e),\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"fileInput\",\n        children: \"Upload Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"fileInput\",\n        onChange: e => handleChange(e),\n        required: true,\n        accept: \"image/png, image/jpeg, image/jpg, image/jfif\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: image,\n      alt: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Img, {\n      uploadedImg: uploadedImage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PostForm, \"ZBP4euLFR5zwlSxBVicxJKMZcOM=\");\n\n_c = PostForm;\n;\nexport default PostForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostForm\");","map":{"version":3,"names":["React","useEffect","useState","auth","getMe","axios","im","PostForm","userData","setUserData","file","setfile","image","setImage","uploadedImage","setUpload","userDataLength","Object","keys","length","getUserData","token","loggedIn","getToken","response","ok","Error","user","json","err","console","error","previewFiles","reader","FileReader","readAsDataURL","onloadend","result","handleSubmit","e","preventDefault","post","uploadedImg","data","public_id","log","handleChange","target","files"],"sources":["/Users/noahgaston/Desktop/Preppers/Client/src/components/post.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport auth from '../utils/auth';\nimport { getMe } from '../utils/user';\nimport axios from 'axios';\nim\n\n function PostForm() {\n    // const [postName, setPostName] = useState('')\n    // const [postBody, setPostBody] = useState('')\n    // const [imgUrl, setImgUrl ] = useState({});\n    const [userData, setUserData] = useState({});\n    const [file, setfile] = useState('');\n    const [image, setImage] = useState('');\n    const [uploadedImage, setUpload] = useState('');\n\n    const userDataLength = Object.keys(userData).length;\n\n    useEffect(() => {\n        const getUserData = async () => {\n       \n          try {\n          \n            const token = auth.loggedIn() ? auth.getToken() : null;\n            \n            if (!token) {\n              return false;\n            }\n    \n            const response = await getMe(token);\n          \n\n            if (!response.ok) {\n              throw new Error('something went wrong!');\n            }\n            const user = await response.json();\n            setUserData(user);\n            \n          } catch (err) {\n            console.error(err);\n          }\n        };\n    \n        getUserData();\n      }, [userDataLength]);\n\n      function previewFiles(file){\n        const reader = new FileReader(file);\n        reader.readAsDataURL(file)\n\n        reader.onloadend = ()=>{\n          setImage(reader.result)\n        }\n\n      };\n\n      async function handleSubmit(e){\n        e.preventDefault()\n        const result = await axios.post(\"http://localhost:3001/post\", {\n          image: image\n        })\n        try{\n          const uploadedImg = result.data.public_id\n          setUpload(uploadedImg)\n        } catch(err){\n          console.log(err)\n        }\n      };\n\n      function handleChange(e){\n        const file = e.target.files[0];\n        setfile(file)\n        previewFiles(file);\n      };\n   \n    return (\n    <div className=\"form\">\n      <form onSubmit={e=> handleSubmit(e)}>\n        <label htmlFor='fileInput'>Upload Image</label>\n        <input type=\"file\" id=\"fileInput\" onChange={e=> handleChange(e)} required\n        accept='image/png, image/jpeg, image/jpg, image/jfif' />\n        <button>submit</button>\n      </form>\n      <img src={image} alt='' />\n      <Img uploadedImg={uploadedImage} />\n    </div>\n    )\n};\n\nexport default PostForm"],"mappings":"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"},"metadata":{},"sourceType":"module"}